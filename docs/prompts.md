# 提示词

本文档提供了使用 Codex CLI 的有效提示词示例和最佳实践。

## 概述

提示词是与 Codex 交互的关键。好的提示词可以帮助 Codex 更好地理解您的需求并提供准确的响应。

## 提示词基本原则

### 1. 明确具体

**不好的提示词**:
```
修复这个代码
```

**好的提示词**:
```
修复这个 JavaScript 函数中的内存泄漏问题，该函数在处理大型数组时性能下降
```

### 2. 提供上下文

**不好的提示词**:
```
优化这段代码
```

**好的提示词**:
```
这是一个 React 组件，用于渲染用户列表。请优化其性能，特别是在处理大量用户数据时。
```

### 3. 指定期望输出

**不好的提示词**:
```
帮我写代码
```

**好的提示词**:
```
请创建一个 Python 函数，接受一个字符串列表，返回去重后的列表，并保持原始顺序。请包含类型注解和文档字符串。
```

### 4. 包含约束条件

**不好的提示词**:
```
创建一个 API
```

**好的提示词**:
```
使用 FastAPI 创建一个 REST API 端点，用于用户注册。需要验证邮箱格式，密码强度要求，并返回适当的错误消息。不要使用数据库，只返回模拟数据。
```

## 代码生成提示词

### 基础代码生成

#### 函数创建

```
创建一个 JavaScript 函数，计算两个数的最大公约数（GCD）。使用欧几里得算法实现。
```

#### 类创建

```
创建一个 Python 类，表示银行账户。包含存款、取款、查询余额方法，并处理透支情况。
```

#### 算法实现

```
用 Java 实现快速排序算法，要求包括详细的注释和性能分析。
```

### 框架特定代码

#### React 组件

```
创建一个 React 函数组件，实现一个可折叠的侧边栏菜单。使用 TypeScript 和 Tailwind CSS，包含动画效果。
```

#### Express.js 路由

```
使用 Express.js 创建一组 RESTful API 路由，用于管理用户数据。包括 CRUD 操作、输入验证和错误处理。
```

#### Django 模型

```
创建一个 Django 模型，表示博客系统。包含用户、文章、评论和分类模型，并定义适当的关系。
```

### 数据库操作

#### SQL 查询

```
编写一个 SQL 查询，找出过去 30 天内购买次数最多的前 10 个用户，以及他们的总购买金额。
```

#### 数据库设计

```
设计一个电子商务数据库模式，包括用户、产品、订单、支付和库存表。考虑性能和可扩展性。
```

## 代码修改提示词

### 重构代码

#### 简化复杂函数

```
重构这个 Python 函数，将其分解为更小的、更易理解的函数。保持功能不变，但提高可读性。
```

#### 改进性能

```
优化这个 JavaScript 数组处理函数，减少时间复杂度。当前实现是 O(n²)，请改进为 O(n)。
```

#### 应用设计模式

```
将这个 PHP 代码重构为使用工厂模式。创建适当的接口和实现类。
```

### Bug 修复

#### 调试帮助

```
这个 React 组件在状态更新时没有重新渲染。请检查代码并找出问题所在。
```

#### 错误处理

```
添加适当的错误处理到这个 Node.js 异步函数中。处理网络错误、解析错误和业务逻辑错误。
```

#### 边界情况

```
修复这个 C++ 函数中的边界条件问题，当输入为空指针或负数时会出现未定义行为。
```

### 添加功能

#### 新功能实现

```
为这个现有用户管理类添加批量导入功能。支持 CSV 文件格式，并包含数据验证。
```

#### 集成第三方服务

```
集成 Stripe 支付处理到这个电子商务应用中。添加支付处理、退款和订阅管理功能。
```

#### 添加测试

```
为这个 Go 函数编写单元测试。覆盖正常情况、边界情况和错误情况。
```

## 代码审查提示词

### 质量审查

```
审查这段 Python 代码的代码质量。检查命名规范、代码结构、性能和安全性问题。
```

### 安全审查

```
分析这个 Web 应用中的安全漏洞。特别关注 SQL 注入、XSS 攻击和认证授权问题。
```

### 性能审查

```
评估这个数据库查询的性能。识别瓶颈并提供优化建议。
```

### 最佳实践检查

```
检查这个 React 代码是否遵循 React 最佳实践。包括状态管理、组件设计和性能优化。
```

## 文档生成提示词

### 代码文档

```
为这个 Java 类生成完整的 Javadoc 文档。包括类描述、方法说明、参数和返回值。
```

### API 文档

```
为这个 REST API 生成 OpenAPI (Swagger) 文档。包括所有端点、请求/响应模型和示例。
```

### 使用指南

```
创建一个使用指南，说明如何使用这个 Python 库。包括安装、配置和代码示例。
```

### 架构文档

```
为这个微服务架构编写技术文档。描述服务间通信、数据流和部署策略。
```

## 学习和教育提示词

### 概念解释

```
用简单的语言解释什么是闭包（closure）在 JavaScript 中。提供实际的代码示例。
```

### 技术比较

```
比较 REST 和 GraphQL API 设计的优缺点。在什么情况下应该选择哪种方案？
```

### 最佳实践

```
解释编写可维护 JavaScript 代码的最佳实践。包括代码组织、命名约定和设计模式。
```

### 架构模式

```
解释微服务架构的优缺点，以及它与单体架构的比较。提供实际应用场景。
```

## 项目特定提示词

### 项目设置

```
为一个新的 Next.js 项目创建基础结构。包括 TypeScript、Tailwind CSS、ESLint 和 Prettier 配置。
```

### 配置管理

```
为这个 Django 项目创建环境配置管理系统。支持开发、测试和生产环境。
```

### CI/CD 配置

```
为这个 React 应用配置 GitHub Actions 工作流。包括测试、构建和部署步骤。
```

### 部署配置

```
创建 Docker 配置文件，用于部署这个 Node.js 应用到生产环境。包括多阶段构建和优化。
```

## 高级提示词技巧

### 链式提示词

使用链式提示词解决复杂问题：

```
第1步：分析这个数据库模式，识别潜在的性能问题。
第2步：基于分析结果，提供具体的优化建议。
第3步：为每个优化建议提供实现代码。
```

### 角色扮演

让 Codex 扮演特定角色：

```
作为经验丰富的安全专家，审查这个 Web 应用的认证系统。识别潜在的安全漏洞并提供修复建议。
```

### 多步骤任务

将复杂任务分解为多个步骤：

```
任务：创建一个完整的博客系统

步骤1：设计数据库模式
步骤2：实现用户认证
步骤3：创建文章管理功能
步骤4：实现评论系统
步骤5：添加搜索功能
```

### 迭代改进

通过迭代改进代码：

```
版本1：创建基本的用户注册功能
版本2：添加邮箱验证
版本3：实现密码重置
版本4：添加双因素认证
```

## 行业特定提示词

### 金融科技

```
创建一个 Python 函数，计算贷款的月供。考虑本金、利率、贷款期限，并包含提前还款计算。
```

### 医疗健康

```
设计一个 HIPAA 合规的患者数据管理系统。包括数据加密、访问控制和审计日志。
```

### 电子商务

```
实现一个产品推荐算法，基于用户购买历史和浏览行为。使用协同过滤方法。
```

### 游戏开发

```
创建一个 Unity C# 脚本，实现角色的移动和跳跃物理效果。包括地面检测和动画控制。
```

## 提示词模板

### 通用模板

```
任务：[明确描述任务]
语言：[编程语言]
框架：[框架/库]
要求：
- [要求1]
- [要求2]
- [要求3]
约束：
- [约束1]
- [约束2]
输出：[期望的输出格式]
```

### 代码审查模板

```
请审查以下[语言]代码：

[代码内容]

重点关注：
- [重点1]
- [重点2]
- [重点3]

请提供：
1. 问题识别
2. 改进建议
3. 最佳实践推荐
```

### 重构模板

```
重构以下[语言]代码：

[代码内容]

重构目标：
- [目标1]
- [目标2]

重构要求：
- 保持功能不变
- 提高代码质量
- 遵循[语言]最佳实践

请提供重构后的代码和说明。
```

## 常见问题和解决方案

### 问题1：Codex 理解错误

**问题**：Codex 没有正确理解我的需求。

**解决方案**：
- 提供更多上下文
- 使用更具体的语言
- 分解复杂任务为简单步骤
- 提供示例输出

### 问题2：生成代码质量不高

**问题**：生成的代码不符合预期质量。

**解决方案**：
- 明确指定代码标准和最佳实践
- 要求包含错误处理和边界情况
- 指定性能要求
- 要求添加注释和文档

### 问题3：过于冗长的响应

**问题**：Codex 生成过多不必要的内容。

**解决方案**：
- 明确指定输出范围
- 使用简洁的语言
- 设置明确的约束
- 要求只关注核心功能

## 最佳实践总结

### 1. 提示词设计

- **具体明确**：避免模糊的描述
- **上下文丰富**：提供足够的背景信息
- **结构清晰**：使用逻辑结构组织提示词
- **约束明确**：指定限制条件

### 2. 交互技巧

- **迭代改进**：逐步完善提示词
- **反馈循环**：基于结果调整提示词
- **分解任务**：将复杂任务分解为简单步骤
- **利用上下文**：使用项目信息和历史记录

### 3. 质量控制

- **验证输出**：检查生成代码的正确性
- **测试覆盖**：确保所有场景都被考虑
- **性能考虑**：关注代码的执行效率
- **安全审查**：检查潜在的安全问题

## 下一步

掌握提示词技巧后，您可以：

- 探索[高级功能](./advanced.md)
- 了解[配置选项](./config.md)
- 查看[项目模板](./getting-started.md)

如果您需要更多帮助，请查看[常见问题](./faq.md)或[贡献指南](./contributing.md)。